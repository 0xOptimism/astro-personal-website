---
import data from '../data/data.json';

const title = "The timeline of my developer journey";
const { timeline } = data as { timeline: Record<string, { title: string; description: string }[]> };

interface Year {
  title: string;
  description: string;
}
---

<section>
  <h2 id="timeline-heading" class="reveal font-display text-2xl font-bold tracking-tight sm:text-3xl">
    {title}
  </h2>
  <ol class="relative mt-10 border-l-2 border-[var(--color-surface-elevated)] pl-6">
    {
      Object.keys(timeline)
        .reverse()
        .map((year: string, yearIndex: number) => (
          <li class="relative mb-12 last:mb-0">
            <span
              class="absolute -left-[29px] top-0 h-3 w-3 rounded-full border-2 border-[var(--color-bg)] bg-[var(--color-accent)]"
              aria-hidden="true"
            />
            <time class="reveal block font-display text-sm font-semibold uppercase tracking-wider text-[var(--color-accent)]" style={`animation-delay: ${0.2 + yearIndex * 0.08}s`}>
              {year}
            </time>
            {
              timeline[year].map((item: Year, i: number) => (
                <div class="reveal mt-2" style={`animation-delay: ${0.25 + yearIndex * 0.08 + i * 0.05}s`}>
                  <h3 class="font-display text-lg font-semibold text-[var(--color-text)]">
                    {item.title}
                  </h3>
                  <p class="mt-1 font-body text-[var(--color-text-muted)] leading-relaxed">
                    {item.description}
                  </p>
                </div>
              ))
            }
          </li>
        ))
    }
  </ol>
</section>
